/*
 *	CssLoader v1.4 - 2015-05-12
 *	Loader build on css3
 *	By Jose Carlos Rodriguez
 *	(c) 2014 Syscover S.L. - http://www.syscover.com/
 *	All rights reserved
 */
"use strict";!function(s){var e={options:{urlPlugin:".",theme:"bubbles",spinnerColor:"#333",delay:250,useLayer:!0,layerColor:"#ffffff",isImage:!1},properties:{spinner:null,spinnerPosY:null,loaded:!1},callback:null,init:function(e,o,t){return this.options=s.extend({},this.options,e||{}),s.ajax({async:!0,cache:!1,dataType:"html",context:this,type:"POST",url:this.options.urlPlugin+"/cssloader/themes/"+this.options.theme+"/elements.php",data:this.options,success:function(e){if(s("body").prepend(e),this.properties.spinner=s("#loading-spinner"),this.options.isImage){var i=this.properties.spinner.find("img");s(i).attr("src",this.options.urlPlugin+"/cssloader/themes/"+this.options.theme+"/"+s(i).attr("src"))}var n=!!navigator.userAgent.match(/Trident.*rv[ :]*10\./),r=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./);if(n||r){var a=.4*s(window).height();this.properties.spinner.css("top",a+"px")}if(this.properties.spinnerPosY=parseInt(this.properties.spinner.css("top"),10),this.callback=o,t){s("#loading-spinner").css("top",this.properties.spinnerPosY+s(window).scrollTop()+"px"),s(window).scroll(s.proxy(this.updateSpinnerIconPosition,this)),s(window).on("load",s.proxy(this.loaded,this));var p=this;setTimeout(function(){"complete"===document.readyState&&0==p.properties.loaded&&p.loaded()},1e3)}else null!=this.callback&&this.callback()},error:function(){}}),this},loaded:function(){this.properties.spinner.fadeOut(this.options.delay+200),s("#pre-cssloader").delay(this.options.delay).fadeOut("slow");var e=this;setTimeout(function(){s("body").css({overflow:"visible"}),s(window).off("scroll",null,e.updateSpinnerIconPosition)},this.options.delay),this.properties.loaded=!0,null!=this.callback&&this.callback()},updateSpinnerIconPosition:function(){s("#loading-spinner").css("top",this.properties.spinnerPosY+s(window).scrollTop()+"px")},show:function(e,o){this.options=s.extend({},this.options,e||{}),this.options.useLayer&&(0==s("#pre-cssloader").length&&s("body").prepend('<div id="pre-cssloader" style="display: none"></div>'),s("#pre-cssloader").css("background-color",this.options.layerColor),s("#pre-cssloader").fadeIn()),s("#loading-spinner").css("top",this.properties.spinnerPosY+s(window).scrollTop()+"px"),s("#loading-spinner").show();var t=this;s(window).scroll(function(){s("#loading-spinner").css("top",t.properties.spinnerPosY+s(window).scrollTop()+"px")}),this.callback=o,null!=this.callback&&this.callback()},hide:function(e){this.options.useLayer&&s("#pre-cssloader").delay(this.options.delay).fadeOut("slow"),this.properties.spinner.fadeOut(this.options.delay+200);var o=this;setTimeout(function(){s("#loading-spinner").css("top",o.properties.spinnerPosY)},this.options.delay+200),this.callback=e,null!=this.callback&&this.callback()}};"function"!=typeof Object.create&&(Object.create=function(s){function e(){}return e.prototype=s,new e}),s.cssLoader=function(o,t){s.data(document,"cssLoader")||s.data(document,"cssLoader",Object.create(e).init(o,t,!0))},s.cssLoader.show=function(o,t){s.data(document,"cssLoader")||(s.cssLoader=s.data(document,"cssLoader",Object.create(e).init(o,t,!1))),s.data(document,"cssLoader").show(o,t)},s.cssLoader.hide=function(e){s.data(document,"cssLoader").hide(e)}}(jQuery);