/*
 *	CssLoader v1.4.1 - 2015-09-1
 *	Loader build on css3
 *	By Jose Carlos Rodriguez
 *	(c) 2015 Syscover S.L. - http://www.syscover.com/
 *	All rights reserved
 */
"use strict";!function(e){var o={options:{urlPlugin:".",theme:"bubbles",spinnerColor:"#333",delay:250,useLayer:!0,layerColor:"#ffffff",isImage:!1},properties:{spinner:null,spinnerPosY:null,loaded:!1},callback:null,init:function(o,s,n){this.options=e.extend({},this.options,o||{});var t=this;return e.ajax({async:!0,cache:!1,dataType:"html",type:"POST",url:this.options.urlPlugin+"/cssloader/themes/"+this.options.theme+"/elements.html",success:function(o){if(e("body").prepend(t.replaceWildcard(o)),t.properties.spinner=e("#loading-spinner"),t.options.isImage){var i=t.properties.spinner.find("img");e(i).attr("src",t.options.urlPlugin+"/cssloader/themes/"+t.options.theme+"/"+e(i).attr("src"))}var r=!!navigator.userAgent.match(/Trident.*rv[ :]*10\./),a=!!navigator.userAgent.match(/Trident.*rv[ :]*11\./);if(r||a){var l=.4*e(window).height();t.properties.spinner.css("top",l+"px")}t.properties.spinnerPosY=parseInt(t.properties.spinner.css("top"),10),t.callback=s,n?(e("#loading-spinner").css("top",t.properties.spinnerPosY+e(window).scrollTop()+"px"),e(window).scroll(function(){t.updateSpinnerIconPosition()}),e(window).on("load",function(){t.loaded()}),setTimeout(function(){"complete"===document.readyState&&0==t.properties.loaded&&t.loaded()},1e3)):null!=t.callback&&t.callback()},error:function(){}}),this},loaded:function(){this.properties.spinner.fadeOut(this.options.delay+200),e("#pre-cssloader").delay(this.options.delay).fadeOut("slow");var o=this;setTimeout(function(){e("body").css({overflow:"visible"}),e(window).off("scroll",null,o.updateSpinnerIconPosition)},this.options.delay),this.properties.loaded=!0,null!=this.callback&&this.callback()},updateSpinnerIconPosition:function(){e("#loading-spinner").css("top",this.properties.spinnerPosY+e(window).scrollTop()+"px")},show:function(o,s){var n=this;this.options=e.extend({},this.options,o||{}),this.options.useLayer&&(0==e("#pre-cssloader").length&&e("body").prepend('<div id="pre-cssloader" style="display: none"></div>'),e("#pre-cssloader").css("background-color",this.options.layerColor),e("#pre-cssloader").fadeIn()),e("#loading-spinner").css("top",this.properties.spinnerPosY+e(window).scrollTop()+"px"),e("#loading-spinner").show(),e(window).scroll(function(){e("#loading-spinner").css("top",n.properties.spinnerPosY+e(window).scrollTop()+"px")}),this.callback=s,null!=this.callback&&this.callback()},hide:function(o){var s=this;this.options.useLayer&&e("#pre-cssloader").delay(this.options.delay).fadeOut("slow"),this.properties.spinner.fadeOut(this.options.delay+200),setTimeout(function(){e("#loading-spinner").css("top",s.properties.spinnerPosY)},this.options.delay+200),this.callback=o,null!=this.callback&&this.callback()},replaceWildcard:function(e){if("fine"==this.options.theme){var o=this.hexToRgb(this.options.spinnerColor);this.options.spinnerColor=o.r+","+o.g+","+o.b}return e=this.replaceAll(e,"$spinnerColor",this.options.spinnerColor)},replaceAll:function(e,o,s){for(;-1!=e.toString().indexOf(o);)e=e.toString().replace(o,s);return e},hexToRgb:function(e){var o=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return o?{r:parseInt(o[1],16),g:parseInt(o[2],16),b:parseInt(o[3],16)}:null}};"function"!=typeof Object.create&&(Object.create=function(e){function o(){}return o.prototype=e,new o}),e.cssLoader=function(s,n){e.data(document,"cssLoader")||e.data(document,"cssLoader",Object.create(o).init(s,n,!0))},e.cssLoader.show=function(s,n){e.data(document,"cssLoader")||(e.cssLoader=e.data(document,"cssLoader",Object.create(o).init(s,n,!1))),e.data(document,"cssLoader").show(s,n)},e.cssLoader.hide=function(o){e.data(document,"cssLoader").hide(o)}}(jQuery);